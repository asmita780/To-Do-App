{% extends "base.html" %}

{% block title %} Tasks {% endblock %}

{% block content %}
    <div class="task-box">
        <h1>Tasks</h1>
        
        <form action="{{ url_for('task.add') }}" method="POST" class="task-form">

            <input type="text" name="title" placeholder="new task" required>

            <button type="submit" class="btn">Add</button>
        </form>

        {% if task_list %}
            <form method="post" action="{{ url_for('task.clear_tasks') }}">
                <button type="submit" class="btn btn-clear">Clear all tasks</button>
            </form>

            <br>
            <table class="task-table">
                <thead>
                    <tr>
                        <th>Tasks</th>
                        <th>Status</th>
                        <th>Change</th>
                    </tr>
                </thead>

                <tbody>
                    {% for task in task_list %}
                        <tr>
                            <td>{{ loop.index }}</td>
                            <td>{{ task.title }}</td>
                            <td>
                                <span class="badge {{ task.status|lower }}">{{task.status}}</span>
                            </td>
                            <td>
                                <form action="{{ url_for('task.toggle_status', task_id = task.id) }}" method="POST">
                                    <button class="btn-smal" type="submit">Next</button>
                                </form>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
        <p>No task yet. Add one above!</p> 
        {% endif %}   

    </div>

{% endblock %}